"use strict";function getPixel(e,t,n){var a=4*(n*e.width+t);return{r:e.data[a],g:e.data[a+1],b:e.data[a+2],a:e.data[a+3]}}function download(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var one_day=864e5,git_size={width:0,height:7},fileChangeHandler=function(e){e.stopPropagation(),e.preventDefault();var t;t="undefined"==typeof e.target.files?e.dataTransfer.files:e.target.files;for(var n,a=0;n=t[a];a++)if(n.type.match("image.*")){var r=new FileReader;r.onload=function(e){return function(e){var t=e.target.result,n=document.getElementById("import-image");n.src=t,render_preview()}}(n),r.readAsDataURL(n)}},handleDragOver=function(e){e.stopPropagation(),e.preventDefault()},render_preview=function(){var e=document.getElementById("import-file");e.addEventListener("change",fileChangeHandler);var t=document.getElementById("import-form");t.addEventListener("dragover",handleDragOver,!1),t.addEventListener("drop",fileChangeHandler,!1),t.addEventListener("click",function(){e.click()});var n=document.getElementById("import-image"),a=n.naturalHeight/7;git_size.width=n.naturalWidth/a;var r=document.getElementById("myCanvas");r.width=git_size.width,r.height=git_size.height;var i=r.getContext("2d");i.drawImage(n,0,0,git_size.width,git_size.height);var d=i.getImageData(0,0,r.width,r.height),o=[];!function(){var e=document.getElementById("contribution");e.innerHTML="";for(var t=new Date("2014-08-03"),n=0,a=0;a<d.width;a++){var r=document.createElement("div");r.className="week week-"+a;for(var i=0;i<d.height;i++){var l=document.createElement("span"),g=new Date(t.getTime()+one_day*n),m=getPixel(d,a,i);0===m.r&&0===m.g&&0===m.b&&0===m.a?m=null:(l.className="dot",o.push(moment(g))),r.appendChild(l),n++}e.appendChild(r)}}(),function(){for(var e=document.getElementById("output"),e="",t=o.length-1;t>=0;t--){var n=o[t],a=n.format("YYYY-MM-DD");e+=a+"\n"}}()};window.onload=function(){render_preview()};