"use strict";function getPixel(e,t,a){var n=4*(a*e.width+t);return{r:e.data[n],g:e.data[n+1],b:e.data[n+2],a:e.data[n+3]}}var one_day=864e5,git_size={width:0,height:7},handleDragOver=function(e){e.stopPropagation(),e.preventDefault()},render_preview=function(){var e=document.getElementById("import-file");e.addEventListener("change",fileChangeHandler);var t=document.getElementById("import-form");t.addEventListener("dragover",handleDragOver,!1),t.addEventListener("drop",fileChangeHandler,!1),t.addEventListener("click",function(){e.click()});var a=document.getElementById("import-image"),n=a.naturalHeight/7;git_size.width=a.naturalWidth/n;var r=document.getElementById("myCanvas");r.width=git_size.width,r.height=git_size.height;var i=r.getContext("2d");i.drawImage(a,0,0,git_size.width,git_size.height);var d=i.getImageData(0,0,r.width,r.height),o=[];!function(){var e=document.getElementById("contribution");e.innerHTML="";for(var t=new Date("2014-08-03"),a=0,n=0;n<d.width;n++){var r=document.createElement("div");r.className="week week-"+n;for(var i=0;i<d.height;i++){var g=document.createElement("span"),l=new Date(t.getTime()+one_day*a),m=getPixel(d,n,i);0===m.r&&0===m.g&&0===m.b&&0===m.a?m=null:(g.className="dot",o.push(moment(l))),r.appendChild(g),a++}e.appendChild(r)}}(),function(){for(var e="",t=o.length-1;t>=0;t--){var a=o[t],n=a.format("YYYY-MM-DD");e+=n+"\n"}}()},fileChangeHandler=function(e){e.stopPropagation(),e.preventDefault();var t;t="undefined"==typeof e.target.files?e.dataTransfer.files:e.target.files;for(var a,n=0;a=t[n];n++)if(a.type.match("image.*")){var r=new FileReader;r.onload=function(){return function(e){var t=e.target.result,a=document.getElementById("import-image");a.src=t,render_preview()}}(a),r.readAsDataURL(a)}};window.onload=function(){render_preview()};